{"code":"20000","msg":"成功","data":{"id":"20155","pid":"12035","name":"03- 安装Blossom","icon":null,"tags":["Blossom"],"sort":null,"cover":null,"describes":null,"starStatus":null,"pv":null,"uv":3,"likes":0,"words":894,"version":null,"markdown":null,"html":"<pre><code id=\"pre-1707044156978-369705\" class=\"hljs language-\">官方文档地址: https://www.wangyunf.com/blossom-doc/guide/deploy/backend-docker-compose.html</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-369705')\"></div></pre><h1 id=\"1-确认是否安装Docker Compose\">确认是否安装Docker Compose</h1><p>执行下方命令，查看是否安装了 Docker Compose，如果安装的较新版本的 Docker，通常会自动安装 Docker Compose。</p>\n<pre><code id=\"pre-1707044156978-803456\" class=\"hljs language-bash\">docker-compose --version</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-803456')\">bash</div></pre><h1 id=\"1-创建 docker-compose.yaml 文件\">创建 docker-compose.yaml 文件</h1><pre><code id=\"pre-1707044156978-430825\" class=\"hljs language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">\"3.8\"</span>\n\n<span class=\"hljs-attr\">networks:</span>\n  <span class=\"hljs-attr\">blossomnet:</span>\n    <span class=\"hljs-attr\">driver:</span>\n      <span class=\"hljs-string\">bridge</span>\n\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">blossom:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">jasminexzzz/blossom:latest</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">blossom-backend</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-comment\"># 【需修改】 </span>\n      <span class=\"hljs-comment\"># 将冒号(:)前的部分改成你运行 docker 的设备的某个路径，不要修改冒号后面的内容。  </span>\n      <span class=\"hljs-comment\"># 如果是windows环境，可以使用/c/home/bl/img/来指定磁盘 </span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">/mnt/a/blossom/bl/:/home/bl/</span> \n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-attr\">SPRING_DATASOURCE_URL:</span> <span class=\"hljs-string\">jdbc:mysql://192.168.2.2:3306/blossom?useUnicode=true&amp;characterEncoding=utf-8&amp;allowPublicKeyRetrieval=true&amp;allowMultiQueries=true&amp;useSSL=false&amp;&amp;serverTimezone=GMT%2B8</span>\n      <span class=\"hljs-attr\">SPRING_DATASOURCE_USERNAME:</span> <span class=\"hljs-string\">root</span>\n      <span class=\"hljs-comment\"># 【可选修改】配置数据库密码，这个改了下方的黄色部分也要修改 </span>\n      <span class=\"hljs-attr\">SPRING_DATASOURCE_PASSWORD:</span> <span class=\"hljs-number\">123456</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"9999:9999\"</span>\n    <span class=\"hljs-attr\">networks:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">blossomnet</span>\n    <span class=\"hljs-attr\">healthcheck:</span>\n      <span class=\"hljs-attr\">test:</span> [<span class=\"hljs-string\">\"CMD\"</span>, <span class=\"hljs-string\">\"curl\"</span>, <span class=\"hljs-string\">\"-f\"</span>, <span class=\"hljs-string\">\"http://localhost:9999/sys/alive\"</span>]\n      <span class=\"hljs-attr\">interval:</span> <span class=\"hljs-string\">30s</span>\n      <span class=\"hljs-attr\">timeout:</span> <span class=\"hljs-string\">10s</span>\n      <span class=\"hljs-attr\">retries:</span> <span class=\"hljs-number\">3</span>\n      <span class=\"hljs-attr\">start_period:</span> <span class=\"hljs-string\">5s</span>\n    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span></code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-430825')\">yaml</div></pre><h1 id=\"1-启动 Docker Compose\">启动 Docker Compose</h1><p>在 docker-compose.yaml 文件所在路径下执行以下命令，然后请耐心等待镜像拉取和启动。</p>\n<pre><code id=\"pre-1707044156978-51982\" class=\"hljs language-bash\">docker compose -f docker-compose.yaml up -d\n<span class=\"hljs-comment\"># 如果命令无效，可使用下方命令尝试</span>\ndocker-compose -f docker-compose.yaml up -d</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-51982')\">bash</div></pre><h2 id=\"2-查看配置项是否正确\">查看配置项是否正确</h2><p>你可以输入以下命令，在容器日志中查看你修改后的配置项是否正常生效：</p>\n<pre><code id=\"pre-1707044156978-22328\" class=\"hljs language-bash\">docker logs blossom-backend</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-22328')\">bash</div></pre><p>在启动日志的最上方会显示你配置的各项参数。</p>\n<h1 id=\"1-检查是否启动成功\">检查是否启动成功</h1><h2 id=\"2-方法一：查看日志\">方法一：查看日志</h2><p>你可以输入以下命令，在容器日志中查看容器是否启动成功：</p>\n<pre><code id=\"pre-1707044156978-152875\" class=\"hljs language-bash\">docker logs blossom-backend</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-152875')\">bash</div></pre><p>如果日志的最底部显示以下内容，则说明容器启动成功。</p>\n<h2 id=\"2-方法二：直接访问\">方法二：直接访问</h2><p>例如你部署在本地，则可以访问<code>localhost:9999</code>，如果返回以下内容，则说明部署成功。以下内容是提示没有登录，现在可以使用客户端登录使用。</p>\n<pre><code id=\"pre-1707044156978-968876\" class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"code\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"AUTH-40101\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"msg\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"无效的授权信息\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"ex\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"无效的授权信息\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"data\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">null</span></span>\n<span class=\"hljs-punctuation\">}</span></code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156978-968876')\">json</div></pre><h1 id=\"1-安装客户端并登录\">安装客户端并登录</h1><p>部署成功后即可使用客户端登录，Blossom 提供了两种客户端。</p>\n<ul>\n<li><a target=\"_blank\" href=\"https://www.wangyunf.com/blossom-doc/guide/about/download.html\">下载 PC 桌面客户端</a></li>\n<li>使用自带的网页客户端，网页客户端地址为: <code>IP:端口(域名)/editor/#/settingindex</code></li>\n</ul>\n<p>例如 IP:端口为127.0.0.1:9999，则访问 <a target=\"_blank\" href=\"http://127.0.0.1:9999/editor/#/settingindex\">http://127.0.0.1:9999/editor/#/settingindex</a></p>\n<p>例如域名为<a target=\"_blank\" href=\"http://www.abc.com，则访问http://www.abc.com/editor/#/settingindex\">http://www.abc.com，则访问http://www.abc.com/editor/#/settingindex</a></p>\n<p>如果有配置反向代理路径，如/bl/，则访问<a target=\"_blank\" href=\"http://www.abc.com/bl/editor/#/settingindex\">http://www.abc.com/bl/editor/#/settingindex</a></p>\n<blockquote class=\"bl-blockquote-red\"><p> 注意 \n\uD83D\uDD34 这个地址是网页的的访问地址，不是登录地址！是填写在浏览器地址栏的地址！</p>\n</blockquote><p>打开客户端后，会进入登录页面。 </p>\n<p><img width=\"auto\" style=\"\" src=\"https://www.wangyunf.com/blossom-doc/imgs/setting/login.png\" alt=\"null\"></p>\n<p>在上方输入后台的访问地址，然后使用默认用户名密码进行登录。</p>\n<pre><code id=\"pre-1707044156979-69932\" class=\"hljs language-yaml\"><span class=\"hljs-string\">用户名:</span> <span class=\"hljs-string\">blos</span>\n<span class=\"hljs-string\">密码：blos</span></code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707044156979-69932')\">yaml</div></pre><blockquote class=\"bl-blockquote-red\"><p> 注意\n\uD83D\uDD34 访问地址中不包含/editor/#/settingindex!!!\n登录后建议将默认用户修改用户名和密码后，做为你的主账号使用，因为后台自带的博客端仅支持用户 ID 为1的用户。</p>\n</blockquote>","creTime":null,"updTime":null,"color":null,"toc":"[{\"level\":1,\"clazz\":\"toc-1\",\"index\":0,\"content\":\"确认是否安装Docker Compose\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":1,\"content\":\"创建 docker-compose.yaml 文件\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":2,\"content\":\"启动 Docker Compose\"},{\"level\":2,\"clazz\":\"toc-2\",\"index\":3,\"content\":\"查看配置项是否正确\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":4,\"content\":\"检查是否启动成功\"},{\"level\":2,\"clazz\":\"toc-2\",\"index\":5,\"content\":\"方法一：查看日志\"},{\"level\":2,\"clazz\":\"toc-2\",\"index\":6,\"content\":\"方法二：直接访问\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":7,\"content\":\"安装客户端并登录\"}]","type":3,"openStatus":null,"syncTime":"2024-02-04 18:55:26","openTime":"2024-02-04 18:55:26","openVersion":3}}