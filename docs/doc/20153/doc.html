{"code":"20000","msg":"成功","data":{"id":"20153","pid":"12035","name":"01- 安装MariaDB","icon":null,"tags":["MySQL"],"sort":null,"cover":null,"describes":null,"starStatus":null,"pv":null,"uv":5,"likes":0,"words":46,"version":null,"markdown":null,"html":"<h1 id=\"1-切换root权限\">切换root权限++</h1><pre><code id=\"pre-1707043105950-815532\" class=\"hljs language-shell\">sudo -i\napt-get update\napt-get --purge remove mysql-common\napt-get install mariadb-server mariadb-client libmariadb-dev</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-815532')\">shell</div></pre><h1 id=\"1-设置远程访问\">设置远程访问</h1><pre><code id=\"pre-1707043105950-53874\" class=\"hljs language-shell\">mysql</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-53874')\">shell</div></pre><pre><code id=\"pre-1707043105950-997574\" class=\"hljs language-sql\"><span class=\"hljs-keyword\">show</span> databases;\nuse mysql;\n<span class=\"hljs-keyword\">ALTER</span> <span class=\"hljs-keyword\">USER</span> <span class=\"hljs-string\">'root'</span>@<span class=\"hljs-string\">'localhost'</span> IDENTIFIED <span class=\"hljs-keyword\">BY</span> <span class=\"hljs-string\">'123456'</span>;\n<span class=\"hljs-keyword\">GRANT</span> <span class=\"hljs-keyword\">ALL</span> PRIVILEGES <span class=\"hljs-keyword\">ON</span> <span class=\"hljs-operator\">*</span>.<span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">TO</span> root@\"%\" IDENTIFIED <span class=\"hljs-keyword\">BY</span> \"123456\";\nflush privileges; \nquit;</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-997574')\">sql</div></pre><blockquote class=\"bl-blockquote-red\"><p>\n\uD83D\uDD34 注意</p>\n</blockquote><pre><code id=\"pre-1707043105950-824169\" class=\"hljs language-sql\"># <span class=\"hljs-number\">10.4</span><span class=\"hljs-number\">.4</span>以上版本\n<span class=\"hljs-keyword\">ALTER</span> <span class=\"hljs-keyword\">USER</span> <span class=\"hljs-string\">'root'</span>@<span class=\"hljs-string\">'localhost'</span> IDENTIFIED <span class=\"hljs-keyword\">BY</span> <span class=\"hljs-string\">'newpassword'</span>;\n# <span class=\"hljs-number\">10.4</span><span class=\"hljs-number\">.4</span>以下版本\n<span class=\"hljs-keyword\">SET</span> PASSWORD <span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-string\">'root'</span>@<span class=\"hljs-string\">'localhost'</span> <span class=\"hljs-operator\">=</span> PASSWORD(<span class=\"hljs-string\">'newpassword'</span>);</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-824169')\">sql</div></pre><h1 id=\"1-开启远程访问权限\">开启远程访问权限</h1><pre><code id=\"pre-1707043105950-411556\" class=\"hljs language-shell\">nano /etc/mysql/mariadb.conf.d/50-server.cnf</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-411556')\">shell</div></pre><pre><code id=\"pre-1707043105950-102202\" class=\"hljs language-properties\"><span class=\"hljs-comment\"># 修改如下选项</span>\n<span class=\"hljs-attr\">bind-address</span>            = <span class=\"hljs-string\">0.0.0.0</span></code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-102202')\">properties</div></pre><pre><code id=\"pre-1707043105950-396958\" class=\"hljs language-shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改完毕，重启服务</span>\nservice mariadb restart</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-396958')\">shell</div></pre><h1 id=\"1-重置密码\">重置密码</h1><pre><code id=\"pre-1707043105950-624305\" class=\"hljs language-shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">停止服务</span>\nsystemctl stop mariadb.service\n<span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">取消安全验证</span>\nsudo mysqld_safe --skip-grant-tables --skip-networking &amp;\nsudo mysql</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-624305')\">shell</div></pre><h1 id=\"1-卸载MySQL\">卸载MySQL</h1><pre><code id=\"pre-1707043105950-523499\" class=\"hljs language-shell\">sudo apt-get --purge remove mariadb-server</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-523499')\">shell</div></pre><h1 id=\"1-更换数据存放目录\">更换数据存放目录</h1><pre><code id=\"pre-1707043105950-808596\" class=\"hljs language-shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">停止服务</span>\nservice mariadb stop\n<span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">创建数据存放目录</span>\nmkdir /data/mysql -p\n<span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改目录所有者/所属组为mysql</span>\nchown -R mysql:mysql /data/mysql\n<span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">将mysql数据文件拷贝到新目录</span>\ncp -a /var/lib/mysql/* /data/mysql/</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707043105950-808596')\">shell</div></pre>","creTime":null,"updTime":null,"color":null,"toc":"[{\"level\":1,\"clazz\":\"toc-1\",\"index\":0,\"content\":\"切换root权限\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":1,\"content\":\"设置远程访问\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":2,\"content\":\"开启远程访问权限\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":3,\"content\":\"重置密码\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":4,\"content\":\"卸载MySQL\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":5,\"content\":\"更换数据存放目录\"}]","type":3,"openStatus":null,"syncTime":"2024-02-04 18:38:03","openTime":"2024-02-04 18:38:03","openVersion":4}}
