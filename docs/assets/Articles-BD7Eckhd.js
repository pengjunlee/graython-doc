var me=Object.defineProperty;var ve=(t,o,e)=>o in t?me(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var O=(t,o,e)=>(ve(t,typeof o!="symbol"?o+"":o,e),e);import{a as fe,b as _e,c as ye,d as he,e as ge,f as be}from"./element-plus-BJNhNJy6.js";import{u as we}from"./vue-router-BKcYu3e2.js";import{f as ke,ac as Se,r,d as ee,_ as z,o as y,c as w,B as u,C as h,V as D,G as E,u as d,A as xe,a as n,F as S,O as G,L as P,$ as J,n as Z,a9 as Ce,aa as Ee,E as Q,K as Te}from"./@vue-DeiGdm1c.js";import{p as ze,m as Ie,d as Le,e as Ae}from"./@element-plus-D2ZrbeLh.js";/* empty css              */import{i as F,g as Ne,a as te,_ as oe,b as Re}from"./index-DGXppN36.js";import{a as Be}from"./axios-Cm0UX6qg.js";import"./@ctrl-D_sRHO8g.js";import"./@vueuse-BYe3nKFQ.js";import"./lodash-es-B8hPxd1J.js";import"./pinia-CkjTwEMl.js";const je=(t,o)=>{let e=!1;ke(()=>{e||t()}),Se(()=>{e&&o(),e=!0})},Oe="blossom_web_",M={set(t,o){window.localStorage.setItem(V(t),JSON.stringify(o))},get(t){let o=window.localStorage.getItem(V(t));return JSON.parse(o)},remove(t){window.localStorage.removeItem(V(t))},clear(){window.localStorage.clear()}},V=t=>Oe+t,$="BLOSSOM-ARTICLE-FONT-SZIE",C=r(M.get($)||.9),Pe=()=>{C.value+=.1,M.set($,C.value)},Ve=()=>{C.value-=.1,M.set($,C.value)},De=()=>C.value,Y=()=>C.value+"rem",Fe=t=>{let o=t.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=[];for(let c=0;c<o.length;c++){let a=o[c],i=1,l=a.innerText,f=a.id;switch(a.localName){case"h1":i=1;break;case"h2":i=2;break;case"h3":i=3;break;case"h4":i=4;break;case"h5":i=5;break;case"h6":i=6;break}let x={content:l,clazz:"toc-"+i,id:f};e.push(x)}return e},Me=t=>{let o=document.getElementById(t);o==null||o.scrollIntoView(!0)},$e=t=>F(t.icon)&&(t.icon.startsWith("http")||t.icon.startsWith("https")),qe=t=>F(t.icon),We=t=>{let o=[];return t.t.forEach(e=>{e.toLocaleLowerCase()==="subject"?o.unshift({content:"专题",bgColor:"#565656",icon:"bl-a-lowerrightpage-line"}):e.toLocaleLowerCase()==="toc"?o.push({content:"目录",bgColor:"#939393"}):o.push({content:e})}),o},Ke=(t,o,e,c,a)=>{if(c==="copyPreCode"){let i=document.getElementById(a);if(i){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(i.innerText);{let l=document.createElement("textarea");return l.value=i.innerText,l.style.position="absolute",l.style.opacity="0",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select(),new Promise((f,x)=>{document.execCommand("copy")?f():x(),l.remove()})}}}},Ue=Ne();class He{constructor(o){O(this,"instance");O(this,"baseConfig",{baseURL:Ue,timeout:6e4});this.instance=Be.create(Object.assign(this.baseConfig,o)),this.instance.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>{e.status!==200&&Promise.reject(e);let a=!1;return(e.config.responseType==="blob"||e.headers["content-type"]==="application/force-download")&&(te(e.data.code)?X(e.data.code)||(a=!1):a=!0),X(e.data.code)&&(a=!0),a?e.data:{data:{html:'<div style="color:#E3E3E3;width:100%;height:300px;display:flex;justify-content: center;align-items: center;font-size:25px;">文章不存在</div>'}}},e=>{let c=e.message;return e.code==="ERR_NETWORK"&&(c="网络错误,请检查您的网络是否通畅"),fe({message:c}),Promise.reject(e)})}request(o){return this.instance.request(o)}get(o,e){return this.instance.get(o,e)}post(o,e,c){return this.instance.post(o,e,c)}delete(o,e){return this.instance.delete(o,e)}getFile(o){return this.instance.get(o)}}const X=t=>t===0||t==="0"||t===2e4||t==="20000",se=new He,Ge=t=>se.get("/docTree.json"),Je=t=>se.getFile("/doc/"+t+"/doc.html"),Ze={class:"detail"},Qe=ee({__name:"ArticleSetting",setup(t){return(o,e)=>{const c=z("bl-tag"),a=_e,i=z("bl-row");return y(),w("div",Ze,[u(i,null,{default:h(()=>[D(" 文章字体大小： "),u(c,{style:{"margin-right":"15px"}},{default:h(()=>[D(E(d(De)().toFixed(1)),1)]),_:1}),u(a,{size:"small",icon:d(ze),onClick:e[0]||(e[0]=l=>d(Pe)())},null,8,["icon"]),u(a,{size:"small",icon:d(Ie),onClick:e[1]||(e[1]=l=>d(Ve)())},null,8,["icon"])]),_:1})])}}}),Ye=oe(Qe,[["__scopeId","data-v-fbf3d80d"]]),T=t=>(Ce("data-v-3738996f"),t=t(),Ee(),t),Xe={class:"articles-root"},et={class:"headmenu"},tt=T(()=>n("div",{class:"iconbl bl-model-line"},null,-1)),ot=T(()=>n("div",{style:{"font-size":"0.8rem"}},"文章列表",-1)),st=T(()=>n("div",{style:{"font-size":"0.8rem"}},"目录",-1)),nt=T(()=>n("div",{class:"iconbl bl-list-ordered"},null,-1)),lt={class:"main"},at={class:"doc-name"},it=["src"],ct={key:1,class:"icon menu-icon","aria-hidden":"true"},rt=["xlink:href"],dt={class:"article-name"},ut=["innerHTML"],pt={class:"viewer-toc"},mt={key:0,class:"doc-info"},vt=T(()=>n("div",{class:"toc-title"},"目录",-1)),ft={class:"toc-content"},_t=["onClick"],yt=ee({__name:"Articles",setup(t){je(()=>{window.onHtmlEventDispatch=Ke,e(),window.addEventListener("resize",R),H()},()=>{e(),window.addEventListener("resize",R),H()}),xe(()=>{window.removeEventListener("resize",R)});const o=r(),e=()=>{let s=c.query.articleId;ne(()=>{Z(()=>{o.value.setCurrentKey(i.value)})}),te(s)&&(i.value=s,W({ty:3,i:s}))},c=we(),a=r(!0),i=r(""),l=r([]),f=r({id:0,pid:0,name:"",tags:[],sort:0,starStatus:0,openStatus:0,type:3,html:`<div style="color:#E3E3E3;width:100%;height:300px;display:flex;justify-content: center;
    align-items: center;font-size:25px;">请在左侧菜单选择文章</div>`}),x=r([]),q=r([]),I=r(),ne=s=>{a.value=!0,l.value=[],q.value=[];const p=m=>{l.value=m.data,l.value.forEach(B=>{q.value.push(B.i.toString())}),s&&s()};Ge().then(m=>p(m)).finally(()=>a.value=!1)},W=async s=>{s.ty==3&&(await le(s.i),window.history.replaceState("","","#/articles?articleId="+s.i),Z(()=>{I.value.scrollTo({top:0}),ae(I.value)}))},le=async s=>{const p=m=>{Re(m.data)||(f.value=m.data)};await Je(s).then(m=>p(m))},ae=async s=>{x.value=Fe(s)},L=r(!1),ie=()=>{L.value=!0},k=r({display:"none"}),A=r(!1),g=r({display:"none",opacity:0}),N=r(!1),b=r({display:"none",opacity:0}),K=s=>{A.value=s,s&&(k.value={display:"block"},g.value={display:"block",opacity:0},setTimeout(()=>{g.value={display:"block",opacity:1}},1)),s||(g.value={display:"block",opacity:0},setTimeout(()=>{g.value={display:"none",opacity:0}},300))},U=s=>{N.value=s,s&&(k.value={display:"block"},b.value={display:"block",opacity:0},setTimeout(()=>{b.value={display:"block",opacity:1}},1)),s||(b.value={display:"block",opacity:0},setTimeout(()=>{b.value={display:"none",opacity:0}},300))},H=()=>{let s=document.body.clientWidth;s>1100&&(g.value={display:"block",opacity:1}),s>1100&&(k.value={display:"none"},b.value={display:"block",opacity:1})},ce=()=>{K(!1),U(!1),k.value={display:"none"}},R=()=>{let s=document.body.clientWidth;s<1100&&(A.value=!1,g.value={display:"none",opacity:0}),s>1100&&(k.value={display:"none"},g.value={display:"block",opacity:1}),s<1100&&(N.value=!1,b.value={display:"none",opacity:0}),s>1100&&(k.value={display:"none"},b.value={display:"block",opacity:1})};return(s,p)=>{const m=z("bl-row"),B=z("bl-tag"),re=ye,de=he,ue=ge,pe=be;return y(),w(P,null,[n("div",Xe,[n("div",{class:"mask",style:S(k.value),onClick:ce},null,4),n("div",et,[u(m,{onClick:p[0]||(p[0]=_=>K(!A.value))},{default:h(()=>[tt,ot]),_:1}),u(m,{just:"flex-end",onClick:p[1]||(p[1]=_=>U(!N.value))},{default:h(()=>[st,nt]),_:1})]),n("div",lt,[n("div",{class:"doc-tree-container",style:S(g.value)},[u(re,{ref_key:"DocTreeRef",ref:o,class:"doc-tree",data:l.value,"highlight-current":!0,indent:14,icon:d(Le),"node-key":"i",onNodeClick:W},{default:h(({_node:_,data:v})=>[n("div",{class:"menu-item-wrapper",style:S({marginTop:v.p==="0"?"5px":"1px",marginBottom:v.p==="0"?"5px":"1px"})},[n("div",{class:Q([(v.t.includes("subject"),"doc-title")])},[n("div",at,[d($e)(v)?(y(),w("img",{key:0,class:"menu-icon-img",src:v.icon},null,8,it)):d(qe)(v)?(y(),w("svg",ct,[n("use",{"xlink:href":"#"+v.icon},null,8,rt)])):G("",!0),n("div",{class:"name-wrapper",style:S({maxWidth:d(F)(v.icon)?"calc(100% - 25px)":"100%"})},E(v.n),5),(y(!0),w(P,null,J(d(We)(v),j=>(y(),Te(B,{"bg-color":j.bgColor,icon:j.icon},{default:h(()=>[D(E(j.content),1)]),_:2},1032,["bg-color","icon"]))),256))])],2)],4)]),_:1},8,["data","icon"])],4),n("div",{class:"doc-content-container",ref_key:"PreviewRef",ref:I,style:S({fontSize:d(Y)()})},[n("div",dt,E(f.value.name),1),u(de,{font:{color:"rgba(157, 157, 157, 0.2)",fontSize:"13",textBaseline:"hanging"},content:f.value.id>0?"Graython":"",gap:[250,250]},{default:h(()=>[n("div",{class:"bl-preview",style:S({fontSize:d(Y)()}),innerHTML:f.value.html},null,12,ut)]),_:1},8,["font","content"])],4),n("div",{class:"toc-container",style:S(b.value)},[n("div",pt,[f.value.id!=0?(y(),w("div",mt)):G("",!0),vt,n("div",ft,[(y(!0),w(P,null,J(x.value,_=>(y(),w("div",{key:_.id,class:Q(["toc-item","link",_.clazz]),onClick:v=>d(Me)(_.id)},E(_.content),11,_t))),128))])])],4),n("div",{class:"module-workbench",onClick:ie},[u(ue,{color:"#7b7b7ba9"},{default:h(()=>[u(d(Ae))]),_:1})])])]),u(pe,{modelValue:L.value,"onUpdate:modelValue":p[2]||(p[2]=_=>L.value=_),class:"center-drawer",direction:"btt","close-on-click-modal":!0,"with-header":!0,"destroy-on-close":!0,size:"70px"},{default:h(()=>[u(Ye)]),_:1},8,["modelValue"])],64)}}}),Lt=oe(yt,[["__scopeId","data-v-3738996f"]]);export{Lt as default};
