var ve=Object.defineProperty;var fe=(t,o,e)=>o in t?ve(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var O=(t,o,e)=>(fe(t,typeof o!="symbol"?o+"":o,e),e);import{a as G,b as _e,c as ye,d as he,e as ge,f as be}from"./element-plus-BJNhNJy6.js";import{u as we}from"./vue-router-BKcYu3e2.js";import{f as ke,ac as Se,r,d as te,_ as z,o as y,c as w,B as u,C as h,V as D,G as T,u as d,A as xe,a as n,F as S,O as J,L as P,$ as Z,n as Q,a9 as Ce,aa as Te,E as Y,K as Ee}from"./@vue-DeiGdm1c.js";import{p as ze,m as Ie,d as Le,e as Ae}from"./@element-plus-D2ZrbeLh.js";/* empty css              */import{i as F,g as Ne,a as oe,_ as se,b as Re}from"./index-BSJYnV7X.js";import{a as Be}from"./axios-Cm0UX6qg.js";import"./@ctrl-D_sRHO8g.js";import"./@vueuse-BYe3nKFQ.js";import"./lodash-es-B8hPxd1J.js";import"./pinia-CkjTwEMl.js";const je=(t,o)=>{let e=!1;ke(()=>{e||t()}),Se(()=>{e&&o(),e=!0})},Oe="blossom_web_",M={set(t,o){window.localStorage.setItem(V(t),JSON.stringify(o))},get(t){let o=window.localStorage.getItem(V(t));return JSON.parse(o)},remove(t){window.localStorage.removeItem(V(t))},clear(){window.localStorage.clear()}},V=t=>Oe+t,$="BLOSSOM-ARTICLE-FONT-SZIE",C=r(M.get($)||.9),Pe=()=>{C.value+=.1,M.set($,C.value)},Ve=()=>{C.value-=.1,M.set($,C.value)},De=()=>C.value,X=()=>C.value+"rem",Fe=t=>{let o=t.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=[];for(let c=0;c<o.length;c++){let i=o[c],a=1,l=i.innerText,f=i.id;switch(i.localName){case"h1":a=1;break;case"h2":a=2;break;case"h3":a=3;break;case"h4":a=4;break;case"h5":a=5;break;case"h6":a=6;break}let x={content:l,clazz:"toc-"+a,id:f};e.push(x)}return e},Me=t=>{let o=document.getElementById(t);o==null||o.scrollIntoView(!0)},$e=t=>F(t.icon)&&(t.icon.startsWith("http")||t.icon.startsWith("https")),qe=t=>F(t.icon),We=t=>{let o=[];return t.t.forEach(e=>{e.toLocaleLowerCase()==="subject"?o.unshift({content:"专题",bgColor:"#565656",icon:"bl-a-lowerrightpage-line"}):e.toLocaleLowerCase()==="toc"?o.push({content:"目录",bgColor:"#939393"}):o.push({content:e})}),o},Ke=(t,o,e,c,i)=>{if(c==="copyPreCode"){let a=document.getElementById(i);if(a){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(a.innerText);{let l=document.createElement("textarea");return l.value=a.innerText,l.style.position="absolute",l.style.opacity="0",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select(),new Promise((f,x)=>{document.execCommand("copy")?f():x(),l.remove()})}}}},Ue=Ne();class He{constructor(o){O(this,"instance");O(this,"baseConfig",{baseURL:Ue,timeout:6e4});this.instance=Be.create(Object.assign(this.baseConfig,o)),this.instance.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>{e.status!==200&&Promise.reject(e);let i=!1;if((e.config.responseType==="blob"||e.headers["content-type"]==="application/force-download")&&(oe(e.data.code)?ee(e.data.code)||(i=!1):i=!0),ee(e.data.code)&&(i=!0),i)return e.data;{let a=e.data;return a.url=e.config.url,G({message:e.data.msg,duration:9999}),Promise.reject(e)}},e=>{let c=e.message;return e.code==="ERR_NETWORK"&&(c="网络错误,请检查您的网络是否通畅"),G({message:c}),Promise.reject(e)})}request(o){return this.instance.request(o)}get(o,e){return this.instance.get(o,e)}post(o,e,c){return this.instance.post(o,e,c)}delete(o,e){return this.instance.delete(o,e)}getFile(o){return this.instance.get(o)}}const ee=t=>t===0||t==="0"||t===2e4||t==="20000",ne=new He,Ge=t=>ne.get("/docTree.json"),Je=t=>ne.getFile("/doc/20151/doc.html"),Ze={class:"detail"},Qe=te({__name:"ArticleSetting",setup(t){return(o,e)=>{const c=z("bl-tag"),i=_e,a=z("bl-row");return y(),w("div",Ze,[u(a,null,{default:h(()=>[D(" 文章字体大小： "),u(c,{style:{"margin-right":"15px"}},{default:h(()=>[D(T(d(De)().toFixed(1)),1)]),_:1}),u(i,{size:"small",icon:d(ze),onClick:e[0]||(e[0]=l=>d(Pe)())},null,8,["icon"]),u(i,{size:"small",icon:d(Ie),onClick:e[1]||(e[1]=l=>d(Ve)())},null,8,["icon"])]),_:1})])}}}),Ye=se(Qe,[["__scopeId","data-v-75d33a22"]]),E=t=>(Ce("data-v-469b85d5"),t=t(),Te(),t),Xe={class:"articles-root"},et={class:"headmenu"},tt=E(()=>n("div",{class:"iconbl bl-model-line"},null,-1)),ot=E(()=>n("div",{style:{"font-size":"0.8rem"}},"文章列表",-1)),st=E(()=>n("div",{style:{"font-size":"0.8rem"}},"目录",-1)),nt=E(()=>n("div",{class:"iconbl bl-list-ordered"},null,-1)),at={class:"main"},lt={class:"doc-name"},it=["src"],ct={key:1,class:"icon menu-icon","aria-hidden":"true"},rt=["xlink:href"],dt={class:"article-name"},ut=["innerHTML"],pt={class:"viewer-toc"},mt={key:0,class:"doc-info"},vt=E(()=>n("div",{class:"toc-title"},"目录",-1)),ft={class:"toc-content"},_t=["onClick"],yt=te({__name:"Articles",setup(t){je(()=>{window.onHtmlEventDispatch=Ke,e(),window.addEventListener("resize",R),H()},()=>{e(),window.addEventListener("resize",R),H()}),xe(()=>{window.removeEventListener("resize",R)});const o=r(),e=()=>{let s=c.query.articleId;ae(()=>{Q(()=>{o.value.setCurrentKey(a.value)})}),oe(s)&&(a.value=s,W({ty:3,i:s}))},c=we(),i=r(!0),a=r(""),l=r([]),f=r({id:0,pid:0,name:"",tags:[],sort:0,starStatus:0,openStatus:0,type:3,html:`<div style="color:#E3E3E3;width:100%;height:300px;display:flex;justify-content: center;
    align-items: center;font-size:25px;">请在左侧菜单选择文章</div>`}),x=r([]),q=r([]),I=r(),ae=s=>{i.value=!0,l.value=[],q.value=[];const p=m=>{l.value=m.data,l.value.forEach(B=>{q.value.push(B.i.toString())}),s&&s()};Ge().then(m=>p(m)).finally(()=>i.value=!1)},W=async s=>{s.ty==3&&(await le(s.i),window.history.replaceState("","","#/articles?articleId="+s.i),Q(()=>{I.value.scrollTo({top:0}),ie(I.value)}))},le=async s=>{const p=m=>{Re(m.data)||(f.value=m.data)};await Je().then(m=>p(m))},ie=async s=>{x.value=Fe(s)},L=r(!1),ce=()=>{L.value=!0},k=r({display:"none"}),A=r(!1),g=r({display:"none",opacity:0}),N=r(!1),b=r({display:"none",opacity:0}),K=s=>{A.value=s,s&&(k.value={display:"block"},g.value={display:"block",opacity:0},setTimeout(()=>{g.value={display:"block",opacity:1}},1)),s||(g.value={display:"block",opacity:0},setTimeout(()=>{g.value={display:"none",opacity:0}},300))},U=s=>{N.value=s,s&&(k.value={display:"block"},b.value={display:"block",opacity:0},setTimeout(()=>{b.value={display:"block",opacity:1}},1)),s||(b.value={display:"block",opacity:0},setTimeout(()=>{b.value={display:"none",opacity:0}},300))},H=()=>{let s=document.body.clientWidth;s>1100&&(g.value={display:"block",opacity:1}),s>1100&&(k.value={display:"none"},b.value={display:"block",opacity:1})},re=()=>{K(!1),U(!1),k.value={display:"none"}},R=()=>{let s=document.body.clientWidth;s<1100&&(A.value=!1,g.value={display:"none",opacity:0}),s>1100&&(k.value={display:"none"},g.value={display:"block",opacity:1}),s<1100&&(N.value=!1,b.value={display:"none",opacity:0}),s>1100&&(k.value={display:"none"},b.value={display:"block",opacity:1})};return(s,p)=>{const m=z("bl-row"),B=z("bl-tag"),de=ye,ue=he,pe=ge,me=be;return y(),w(P,null,[n("div",Xe,[n("div",{class:"mask",style:S(k.value),onClick:re},null,4),n("div",et,[u(m,{onClick:p[0]||(p[0]=_=>K(!A.value))},{default:h(()=>[tt,ot]),_:1}),u(m,{just:"flex-end",onClick:p[1]||(p[1]=_=>U(!N.value))},{default:h(()=>[st,nt]),_:1})]),n("div",at,[n("div",{class:"doc-tree-container",style:S(g.value)},[u(de,{ref_key:"DocTreeRef",ref:o,class:"doc-tree",data:l.value,"highlight-current":!0,indent:14,icon:d(Le),"node-key":"i",onNodeClick:W},{default:h(({_node:_,data:v})=>[n("div",{class:"menu-item-wrapper",style:S({marginTop:v.p==="0"?"5px":"1px",marginBottom:v.p==="0"?"5px":"1px"})},[n("div",{class:Y([(v.t.includes("subject"),"doc-title")])},[n("div",lt,[d($e)(v)?(y(),w("img",{key:0,class:"menu-icon-img",src:v.icon},null,8,it)):d(qe)(v)?(y(),w("svg",ct,[n("use",{"xlink:href":"#"+v.icon},null,8,rt)])):J("",!0),n("div",{class:"name-wrapper",style:S({maxWidth:d(F)(v.icon)?"calc(100% - 25px)":"100%"})},T(v.n),5),(y(!0),w(P,null,Z(d(We)(v),j=>(y(),Ee(B,{"bg-color":j.bgColor,icon:j.icon},{default:h(()=>[D(T(j.content),1)]),_:2},1032,["bg-color","icon"]))),256))])],2)],4)]),_:1},8,["data","icon"])],4),n("div",{class:"doc-content-container",ref_key:"PreviewRef",ref:I,style:S({fontSize:d(X)()})},[n("div",dt,T(f.value.name),1),u(ue,{font:{color:"rgba(157, 157, 157, 0.2)",fontSize:"13",textBaseline:"hanging"},content:f.value.id>0?"Graython":"",gap:[250,250]},{default:h(()=>[n("div",{class:"bl-preview",style:S({fontSize:d(X)()}),innerHTML:f.value.html},null,12,ut)]),_:1},8,["font","content"])],4),n("div",{class:"toc-container",style:S(b.value)},[n("div",pt,[f.value.id!=0?(y(),w("div",mt)):J("",!0),vt,n("div",ft,[(y(!0),w(P,null,Z(x.value,_=>(y(),w("div",{key:_.id,class:Y(["toc-item","link",_.clazz]),onClick:v=>d(Me)(_.id)},T(_.content),11,_t))),128))])])],4),n("div",{class:"module-workbench",onClick:ce},[u(pe,{color:"#7b7b7ba9"},{default:h(()=>[u(d(Ae))]),_:1})])])]),u(me,{modelValue:L.value,"onUpdate:modelValue":p[2]||(p[2]=_=>L.value=_),class:"center-drawer",direction:"btt","close-on-click-modal":!0,"with-header":!0,"destroy-on-close":!0,size:"70px"},{default:h(()=>[u(Ye)]),_:1},8,["modelValue"])],64)}}}),Lt=se(yt,[["__scopeId","data-v-469b85d5"]]);export{Lt as default};
