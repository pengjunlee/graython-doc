{"code":"20000","msg":"成功","data":{"id":"20156","pid":"12035","name":"04- 系统操作","icon":null,"tags":["Linux"],"sort":null,"cover":null,"describes":null,"starStatus":null,"pv":null,"uv":2,"likes":0,"words":332,"version":null,"markdown":null,"html":"<h1 id=\"1-磁盘挂载\">磁盘挂载</h1><pre><code id=\"pre-1707054178778-63713\" class=\"hljs language-shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">查看树莓派系统挂载的储存设备</span>\nsudo fdisk -l | grep '^Disk'\n<span class=\"hljs-meta prompt_\">\n# </span><span class=\"language-bash\">查看挂载点</span>\nsudo df -h\n<span class=\"hljs-meta prompt_\">\n# </span><span class=\"language-bash\">创建挂载点</span>\nsudo mkdir /mnt/green\nsudo chown pi:pi -R /mnt/green\n<span class=\"hljs-meta prompt_\">\n# </span><span class=\"language-bash\">挂载硬盘</span>\nsudo mount /dev/sdb /mnt/green\n</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-63713')\">shell</div></pre><h1 id=\"1-开机自启动\">开机自启动</h1><h2 id=\"2-方法一 rc.local文件中添加自启动命令\">方法一 rc.local文件中添加自启动命令</h2><p>执行命令：</p>\n<pre><code id=\"pre-1707054178778-529098\" class=\"hljs language-shell\">sudo nano /etc/rc.local</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-529098')\">shell</div></pre><p>然后在文件最后一行添加要执行程序的全路径。</p>\n<pre><code id=\"pre-1707054178778-356705\" class=\"hljs language-shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">挂载硬盘</span>\nsudo mount /dev/sdb /mnt/green\n<span class=\"hljs-meta prompt_\">\n# </span><span class=\"language-bash\">或者 执行脚本文件</span>\ncd /home/pi/ &amp;&amp; sudo ./auto-run.sh\n/home/pi/./auto-run.sh</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-356705')\">shell</div></pre><p>/home/pi/auto-run.sh 内容如下:</p>\n<pre><code id=\"pre-1707054178778-753580\" class=\"hljs language-shell\">sudo mount /dev/sdb /mnt/green\nsystemctl daemon-reload\ncd /home/pi/docker-compose/blossom/ &amp;&amp; sudo docker compose up -d\ncd /home/pi/docker-compose/spug/ &amp;&amp; sudo docker compose up -d\n</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-753580')\">shell</div></pre><blockquote class=\"bl-blockquote-red\"><p>\n\uD83D\uDD34 注意，你的命令应该添加在：exit 0 之前</p>\n</blockquote><p>添加完保存后设置rc.local可执行权限</p>\n<pre><code id=\"pre-1707054178778-451540\" class=\"hljs language-shell\">sudo chmod +x /home/pi/auto-run.sh</code><ol><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-451540')\">shell</div></pre><h2 id=\"2-方法二 在/etc/init.d目录下添加自启动脚本\">方法二 在/etc/init.d目录下添加自启动脚本</h2><p>linux在 <code>/etc/rc.d/init.d</code> 下有很多的文件，每个文件都是可以看到内容的，其实都是一些shell脚本或者可执行二进制文件。</p>\n<p>Linux开机的时候，会加载运行<code>/etc/init.d</code>目录下的程序，因此我们可以把想要自动运行的脚本放到这个目录下即可。系统服务的启动就是通过这种方式实现的。</p>\n<p>新建一个 auto-run.sh，内容如下:</p>\n<pre><code id=\"pre-1707054178778-967677\" class=\"hljs language-bash\">sudo docker start ddc52329819c\n</code><ol><li><span class=\"line-num\"></span></li><li><span class=\"line-num\"></span></li></ol><div class=\"pre-copy\" onclick=\"onHtmlEventDispatch(this,'click',event,'copyPreCode','pre-1707054178778-967677')\">bash</div></pre><blockquote class=\"bl-blockquote-red\"><p>\n\uD83D\uDD34\nPS：添加完后务必设置文件的可执行权限 chmod +x filename</p>\n</blockquote>","creTime":null,"updTime":null,"color":null,"toc":"[{\"level\":1,\"clazz\":\"toc-1\",\"index\":0,\"content\":\"磁盘挂载\"},{\"level\":1,\"clazz\":\"toc-1\",\"index\":1,\"content\":\"开机自启动\"},{\"level\":2,\"clazz\":\"toc-2\",\"index\":2,\"content\":\"方法一 rc.local文件中添加自启动命令\"},{\"level\":2,\"clazz\":\"toc-2\",\"index\":3,\"content\":\"方法二 在/etc/init.d目录下添加自启动脚本\"}]","type":3,"openStatus":null,"syncTime":"2024-02-04 21:46:50","openTime":"2024-02-04 19:22:43","openVersion":22}}