var fe=Object.defineProperty;var he=(o,t,e)=>t in o?fe(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var M=(o,t,e)=>(he(o,typeof t!="symbol"?t+"":t,e),e);import{a as J,b as ye,c as be,d as ge,e as we,f as ke}from"./element-plus-iJba2N25.js";import{u as Ee}from"./vue-router-DoQLf6RW.js";import{L as I,i as V,a as oe,s as Se,b as C,u as se,t as Te,_ as ne}from"./index-C2HVgPlh.js";import{f as Ae,ae as Be,r as d,d as le,_ as x,o as h,c as g,B as p,C as w,V as T,G as f,u as l,A as Re,a as n,F as B,O as U,L as j,$ as Q,n as Y,ab as Ce,ac as xe,E as X,K as Ie}from"./@vue-zgf-c9T5.js";import{p as Le,m as Oe,d as Pe,e as ze}from"./@element-plus-CeXAdgqv.js";/* empty css              */import{a as Ne}from"./axios-Cm0UX6qg.js";import"./@ctrl-D_sRHO8g.js";import"./@vueuse-DJQmtMPG.js";import"./lodash-es-B8hPxd1J.js";import"./pinia-CDeHMC2n.js";const De=(o,t)=>{let e=!1;Ae(()=>{e||o()}),Be(()=>{e&&t(),e=!0})},G="BLOSSOM-ARTICLE-FONT-SZIE",R=d(I.get(G)||.9),We=()=>{R.value+=.1,I.set(G,R.value)},Me=()=>{R.value-=.1,I.set(G,R.value)},Ue=()=>R.value,ee=()=>R.value+"rem",je=o=>{let t=o.querySelectorAll("h1, h2, h3, h4, h5, h6"),e=[];for(let i=0;i<t.length;i++){let a=t[i],c=1,r=a.innerText,k=a.id;switch(a.localName){case"h1":c=1;break;case"h2":c=2;break;case"h3":c=3;break;case"h4":c=4;break;case"h5":c=5;break;case"h6":c=6;break}let u={content:r,clazz:"toc-"+c,id:k};e.push(u)}return e},Ve=o=>{let t=document.getElementById(o);t==null||t.scrollIntoView(!0)},Ge=o=>V(o.icon)&&(o.icon.startsWith("http")||o.icon.startsWith("https")),Ke=o=>V(o.icon),Fe=o=>{let t=[];return o.t.forEach(e=>{e.toLocaleLowerCase()==="subject"?t.unshift({content:"专题",bgColor:"#565656",icon:"bl-a-lowerrightpage-line"}):e.toLocaleLowerCase()==="toc"?t.push({content:"目录",bgColor:"#939393"}):t.push({content:e})}),t},$e=(o,t,e,i,a)=>{if(i==="copyPreCode"){let c=document.getElementById(a);if(c){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c.innerText);{let r=document.createElement("textarea");return r.value=c.innerText,r.style.position="absolute",r.style.opacity="0",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select(),new Promise((k,u)=>{document.execCommand("copy")?k():u(),r.remove()})}}}};var qe={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const He=qe.VITE_BL_API_BASE_URI,Ze=()=>{console.log("Blossom-web ===> 环境:","production"),console.log("Blossom-web ===> window.blconfig.DOMAIN:",window.blconfig.DOMAIN.PRD),console.log("Blossom-web ===> SpringBaseUrl:",He)};Ze();const Je=()=>window.blconfig.DOMAIN.PRD,Qe=()=>oe(window.blconfig.DOMAIN.USER_ID)?1:window.blconfig.DOMAIN.USER_ID,Ye=Qe(),Xe=Je();class et{constructor(t){M(this,"instance");M(this,"baseConfig",{baseURL:Xe,timeout:6e4});this.instance=Ne.create(Object.assign(this.baseConfig,t)),this.instance.interceptors.request.use(e=>{let i="",a=I.get(Se);return C(a)&&C(a.token)&&(i=a.token),e.headers={...e.headers,"Blossom-User-Id":Ye,Authorization:"Bearer "+i},e},e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>{e.status!==200&&Promise.reject(e);let a=!1;if((e.config.responseType==="blob"||e.headers["content-type"]==="application/force-download")&&(C(e.data.code)?te(e.data.code)||(a=!1):a=!0),te(e.data.code)&&(a=!0),a)return e.data;if(e.data.code==="AUTH-40101")return console.log("授权失败, 重置登录状态"),se().reset(),Te("/home"),Promise.reject(e);{let c=e.data;return c.url=e.config.url,J({message:e.data.msg,duration:9999}),Promise.reject(e)}},e=>{let i=e.message;return e.code==="ERR_NETWORK"&&(i="网络错误,请检查您的网络是否通畅"),J({message:i}),Promise.reject(e)})}request(t){return this.instance.request(t)}get(t,e){return this.instance.get(t,e)}post(t,e,i){return this.instance.post(t,e,i)}delete(t,e){return this.instance.delete(t,e)}getFile(t){return this.instance.get(t)}}const te=o=>o===0||o==="0"||o===2e4||o==="20000",ae=new et,tt=o=>ae.get("/docTree.json"),ot=o=>ae.getFile("/doc/20151/doc.html"),st={class:"detail"},nt=le({__name:"ArticleSetting",setup(o){return(t,e)=>{const i=x("bl-tag"),a=ye,c=x("bl-row");return h(),g("div",st,[p(c,null,{default:w(()=>[T(" 文章字体大小： "),p(i,{style:{"margin-right":"15px"}},{default:w(()=>[T(f(l(Ue)().toFixed(1)),1)]),_:1}),p(a,{size:"small",icon:l(Le),onClick:e[0]||(e[0]=r=>l(We)())},null,8,["icon"]),p(a,{size:"small",icon:l(Oe),onClick:e[1]||(e[1]=r=>l(Me)())},null,8,["icon"])]),_:1})])}}}),lt=ne(nt,[["__scopeId","data-v-75d33a22"]]),y=o=>(Ce("data-v-5e8f3c8b"),o=o(),xe(),o),at={class:"articles-root"},it={class:"headmenu"},ct=y(()=>n("div",{class:"iconbl bl-model-line"},null,-1)),rt=y(()=>n("div",{style:{"font-size":"0.8rem"}},"文章列表",-1)),ut=y(()=>n("div",{style:{"font-size":"0.8rem"}},"目录",-1)),dt=y(()=>n("div",{class:"iconbl bl-list-ordered"},null,-1)),pt={class:"main"},_t={class:"doc-name"},mt=["src"],vt={key:1,class:"icon menu-icon","aria-hidden":"true"},ft=["xlink:href"],ht={key:0,class:"article-name"},yt=["innerHTML"],bt={class:"viewer-toc"},gt={key:0,class:"doc-info"},wt={class:"doc-name",style:{"font-size":"15px"}},kt={class:"doc-subtitle"},Et=y(()=>n("span",{class:"iconbl bl-pen-line"},null,-1)),St=y(()=>n("span",{class:"iconbl bl-read-line"},null,-1)),Tt=y(()=>n("span",{class:"iconbl bl-like-line"},null,-1)),At={class:"doc-subtitle"},Bt=y(()=>n("span",{class:"iconbl bl-a-clock3-line"},null,-1)),Rt={class:"doc-subtitle"},Ct=y(()=>n("span",{class:"iconbl bl-a-clock3-line"},null,-1)),xt=y(()=>n("div",{class:"toc-title"},"目录",-1)),It={class:"toc-content"},Lt=["onClick"],Ot=le({__name:"Articles",setup(o){const t=se();De(()=>{window.onHtmlEventDispatch=$e,i(),window.addEventListener("resize",N),Z()},()=>{i(),window.addEventListener("resize",N),Z()}),Re(()=>{window.removeEventListener("resize",N)});const e=d(),i=()=>{let s=a.query.articleId;ie(()=>{Y(()=>{e.value.setCurrentKey(r.value)})}),C(s)&&(r.value=s,$({ty:3,i:s}))},a=Ee(),c=d(!0),r=d(""),k=d([]),u=d({id:0,pid:0,name:"",tags:[],sort:0,starStatus:0,openStatus:0,type:3,html:`<div style="color:#E3E3E3;width:100%;height:300px;display:flex;justify-content: center;
    align-items: center;font-size:25px;">请在左侧菜单选择文章</div>`}),K=d([]),F=d([]),L=d(),ie=s=>{c.value=!0,k.value=[],F.value=[];const _=m=>{k.value=m.data,k.value.forEach(D=>{F.value.push(D.i.toString())}),s&&s()};tt().then(m=>_(m)).finally(()=>c.value=!1)},$=async s=>{s.ty==3&&(await ce(s.i),window.history.replaceState("","","#/articles?articleId="+s.i),Y(()=>{L.value.scrollTo({top:0}),re(L.value)}))},ce=async s=>{const _=m=>{oe(m.data)||(u.value=m.data)};await ot().then(m=>_(m))},re=async s=>{K.value=je(s)},O=d(!1),ue=()=>{O.value=!0},A=d({display:"none"}),P=d(!1),E=d({display:"none",opacity:0}),z=d(!1),S=d({display:"none",opacity:0}),q=s=>{P.value=s,s&&(A.value={display:"block"},E.value={display:"block",opacity:0},setTimeout(()=>{E.value={display:"block",opacity:1}},1)),s||(E.value={display:"block",opacity:0},setTimeout(()=>{E.value={display:"none",opacity:0}},300))},H=s=>{z.value=s,s&&(A.value={display:"block"},S.value={display:"block",opacity:0},setTimeout(()=>{S.value={display:"block",opacity:1}},1)),s||(S.value={display:"block",opacity:0},setTimeout(()=>{S.value={display:"none",opacity:0}},300))},Z=()=>{let s=document.body.clientWidth;s>1100&&(E.value={display:"block",opacity:1}),s>1100&&(A.value={display:"none"},S.value={display:"block",opacity:1})},de=()=>{q(!1),H(!1),A.value={display:"none"}},N=()=>{let s=document.body.clientWidth;s<1100&&(P.value=!1,E.value={display:"none",opacity:0}),s>1100&&(A.value={display:"none"},E.value={display:"block",opacity:1}),s<1100&&(z.value=!1,S.value={display:"none",opacity:0}),s>1100&&(A.value={display:"none"},S.value={display:"block",opacity:1})};return(s,_)=>{const m=x("bl-row"),D=x("bl-tag"),pe=be,_e=ge,me=we,ve=ke;return h(),g(j,null,[n("div",at,[n("div",{class:"mask",style:B(A.value),onClick:de},null,4),n("div",it,[p(m,{onClick:_[0]||(_[0]=b=>q(!P.value))},{default:w(()=>[ct,rt]),_:1}),p(m,{just:"flex-end",onClick:_[1]||(_[1]=b=>H(!z.value))},{default:w(()=>[ut,dt]),_:1})]),n("div",pt,[n("div",{class:"doc-tree-container",style:B(E.value)},[p(pe,{ref_key:"DocTreeRef",ref:e,class:"doc-tree",data:k.value,"highlight-current":!0,indent:14,icon:l(Pe),"node-key":"i",onNodeClick:$},{default:w(({_node:b,data:v})=>[n("div",{class:"menu-item-wrapper",style:B({marginTop:v.p==="0"?"5px":"1px",marginBottom:v.p==="0"?"5px":"1px"})},[n("div",{class:X([v.t.includes("subject")&&l(t).userParams.WEB_BLOG_SUBJECT_TITLE==="1"?"subject-title":"doc-title"])},[n("div",_t,[l(Ge)(v)?(h(),g("img",{key:0,class:"menu-icon-img",src:v.icon},null,8,mt)):l(Ke)(v)?(h(),g("svg",vt,[n("use",{"xlink:href":"#"+v.icon},null,8,ft)])):U("",!0),n("div",{class:"name-wrapper",style:B({maxWidth:l(V)(v.icon)?"calc(100% - 25px)":"100%"})},f(v.n),5),(h(!0),g(j,null,Q(l(Fe)(v),W=>(h(),Ie(D,{"bg-color":W.bgColor,icon:W.icon},{default:w(()=>[T(f(W.content),1)]),_:2},1032,["bg-color","icon"]))),256))])],2)],4)]),_:1},8,["data","icon"])],4),n("div",{class:"doc-content-container",ref_key:"PreviewRef",ref:L,style:B({fontSize:l(ee)()})},[l(t).userParams.WEB_BLOG_SHOW_ARTICLE_NAME==="1"?(h(),g("div",ht,f(u.value.name),1)):U("",!0),p(_e,{font:{color:l(t).userParams.WEB_BLOG_WATERMARK_COLOR,fontSize:l(t).userParams.WEB_BLOG_WATERMARK_FONTSIZE,textBaseline:"hanging"},content:u.value.id>0&&l(t).userParams.WEB_BLOG_WATERMARK_ENABLED==="1"?l(t).userParams.WEB_BLOG_WATERMARK_CONTENT:"",gap:[l(t).userParams.WEB_BLOG_WATERMARK_GAP,l(t).userParams.WEB_BLOG_WATERMARK_GAP]},{default:w(()=>[n("div",{class:"bl-preview",style:B({fontSize:l(ee)()}),innerHTML:u.value.html},null,12,yt)]),_:1},8,["font","content","gap"])],4),n("div",{class:"toc-container",style:B(S.value)},[n("div",bt,[u.value.id!=0?(h(),g("div",gt,[n("div",wt,f(u.value.name),1),n("div",kt,[Et,T(" "+f(u.value.words)+" 字 | ",1),St,T(" "+f(u.value.uv)+" | ",1),Tt,T(" "+f(u.value.likes),1)]),n("div",At,[Bt,T(" 公开 "+f(u.value.openTime),1)]),n("div",Rt,[Ct,T(" 修改 "+f(u.value.syncTime),1)])])):U("",!0),xt,n("div",It,[(h(!0),g(j,null,Q(K.value,b=>(h(),g("div",{key:b.id,class:X(["toc-item","link",b.clazz]),onClick:v=>l(Ve)(b.id)},f(b.content),11,Lt))),128))])])],4),n("div",{class:"module-workbench",onClick:ue},[p(me,{color:"#7b7b7ba9"},{default:w(()=>[p(l(ze))]),_:1})])])]),p(ve,{modelValue:O.value,"onUpdate:modelValue":_[2]||(_[2]=b=>O.value=b),class:"center-drawer",direction:"btt","close-on-click-modal":!0,"with-header":!0,"destroy-on-close":!0,size:"70px"},{default:w(()=>[p(lt)]),_:1},8,["modelValue"])],64)}}}),$t=ne(Ot,[["__scopeId","data-v-5e8f3c8b"]]);export{$t as default};
